<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<h1>promise</h1>
		<button type="button" id="but">随机中奖</button>
	</body>
	<script type="text/javascript">
		// 生成随机数
		function rand(m,n){
			return Math.ceil(Math.random()*(n-m+1))+m-1;
		}
		
		
		let btn = document.querySelector("#but");
		
		btn.addEventListener("click",function(){
			// 定时器 实现异步
			// setTimeout(()=>{
			// 	// 获取从1~100的一个随机数
			// 	let n = rand(1,100);
			// 	if(n<=30){
			// 		alert("恭喜获得优惠券！"+n)
			// 	}else{
			// 		alert("很遗憾，没中奖！"+n)
			// 	}
			// },1000)
			
			// promise 形式实现 实现异步
			const p = new Promise((resolve,reject)=>{
				setTimeout(()=>{
					// 获取从1~100的一个随机数
					let n = rand(1,100);
					if(n<=30){
						resolve(n);
					}else{
						reject(n)
					}
				},1000)
			});
			
			// 调用then方法
			p.then((n)=>{
				alert("恭喜获得优惠券！"+n)
			},(n)=>{
				alert("很遗憾，没中奖！"+n)
			})
		})
	</script>
</html>
